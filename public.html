<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Hallenmeister – Live-Tabelle</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
    :root {
        --bg: #f3f4f6;
        --card: #ffffff;
        --border: #e5e7eb;
        --text: #111827;
        --text-soft: #6b7280;
        --red: #c8102e;
        --blue: #0047ab;
        --blue-soft: #e0edff;
        --gold: #f7b500;
        --radius: 14px;
    }

    * { box-sizing: border-box; }

    body {
        font-family: "Inter", sans-serif;
        background: radial-gradient(circle at top, #ffffff, #f3f4f6 55%);
        margin: 0;
        padding: 24px;
        color: var(--text);
    }

    .app { max-width: 1150px; margin: 0 auto; }

    /* HERO */
    .hero{
        display:flex;align-items:center;justify-content:space-between;
        padding:18px 22px;border-radius:20px;
        background:
          radial-gradient(circle at 0% 0%, rgba(247,181,0,0.3), transparent 55%),
          linear-gradient(135deg,var(--red),var(--blue));
        color:#fff;
        box-shadow:0 20px 40px rgba(148,27,63,0.35),0 0 30px rgba(0,71,171,0.35);
        margin-bottom:26px;
    }
    .hero-left{display:flex;align-items:center;gap:18px;}
    .logo-wrap{
        width:78px;height:78px;border-radius:18px;padding:6px;
        background:#fff;box-shadow:0 12px 25px rgba(0,0,0,0.28),0 0 18px rgba(247,181,0,0.7);
        display:flex;align-items:center;justify-content:center;
    }
    .logo-wrap img{max-width:100%;max-height:100%;object-fit:contain;border-radius:12px;}
    .hero-title{font-size:1.9rem;font-weight:700;letter-spacing:0.08em;text-transform:uppercase;}
    .hero-sub{font-size:0.95rem;opacity:0.93;margin-top:2px;}
    .hero-pill{
        margin-top:10px;display:inline-flex;align-items:center;gap:8px;
        font-size:0.78rem;text-transform:uppercase;letter-spacing:0.16em;
        padding:6px 12px;border-radius:999px;
        background:rgba(255,255,255,0.09);border:1px solid rgba(255,255,255,0.45);
    }
    .hero-dot{width:7px;height:7px;border-radius:999px;background:#22c55e;box-shadow:0 0 10px rgba(34,197,94,0.9);}

    /* CARD */
    .card{
        background:var(--card);border-radius:var(--radius);
        border:1px solid var(--border);padding:18px 20px;
        box-shadow:0 10px 26px rgba(15,23,42,0.08);
    }

    /* TABLE */
    table{width:100%;border-collapse:collapse;border-radius:12px;overflow:hidden;table-layout:fixed;}
    th,td{padding:10px 8px;border-bottom:1px solid #e5e7eb;text-align:center;vertical-align:middle;font-size:.9rem;}
    th{
        background:linear-gradient(90deg,var(--blue-soft),#fff);
        font-weight:600;color:#4b5563;text-transform:uppercase;font-size:.75rem;letter-spacing:.06em;
    }
    th:nth-child(2),td:nth-child(2){text-align:left;padding-left:14px;}
    tbody tr:nth-child(even){background:#f9fafb;}
    tbody tr:hover{background:#e0edff;}

    tr.gold{background:#fef9c3;}
    tr.silver{background:#e5e7eb;}
    tr.bronze{background:#fee2e2;}

</style>
</head>

<body>
<div class="app">

    <header class="hero">
        <div class="hero-left">
            <div class="logo-wrap">
                <img src="logo.png" alt="JFG Gäuboden-Süd Logo">
            </div>
            <div>
                <div class="hero-title">JFG Gäuboden-Süd</div>
                <div class="hero-sub">Hallenmeister · Live-Tabelle</div>
                <div class="hero-pill">
                    <span class="hero-dot"></span>
                    Live aktualisiert
                </div>
            </div>
        </div>
    </header>

    <div class="card">

        <table id="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Spieler</th>
                    <th>Punkte</th>
                    <th>S</th>
                    <th>U</th>
                    <th>N</th>
                    <th>Spiele</th>
                    <th>Tore</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

    </div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyD6e3gVyYhC3XGr0fXnbONltHaQXITsPW8",
  authDomain: "hallenmeister-jfg.firebaseapp.com",
  databaseURL: "https://hallenmeister-jfg-default-rtdb.firebaseio.com",
  projectId: "hallenmeister-jfg",
  storageBucket: "hallenmeister-jfg.firebasestorage.app",
  messagingSenderId: "116609969538",
  appId: "1:116609969538:web:e00d5b82ac49609aae339b"
};

const app = initializeApp(firebaseConfig);
const db  = getDatabase(app);

const playersRef = ref(db, "players");

onValue(playersRef, snap => {
    const players = snap.val() || {};
    updateTable(players);
});

function updateTable(players){
    const tbody = document.querySelector("#table tbody");
    tbody.innerHTML = "";

    const sorted = Object.entries(players)
        .sort((a,b) => b[1].points - a[1].points);

    sorted.forEach(([name,p], index) => {
        let cls = "";
        if(index === 0) cls = "gold";
        else if(index === 1) cls = "silver";
        else if(index === 2) cls = "bronze";

        const spiele = (p.wins || 0) + (p.draws || 0) + (p.losses || 0);

        tbody.innerHTML += `
        <tr class="${cls}">
            <td>${index+1}</td>
            <td>${name}${p.team ? " <span style='color:#6b7280'>( "+p.team+" )</span>" : ""}</td>
            <td>${p.points}</td>
            <td>${p.wins}</td>
            <td>${p.draws}</td>
            <td>${p.losses}</td>
            <td>${spiele}</td>
            <td>${p.goals}</td>
        </tr>`;
    });
}
</script>

</body>
</html>
